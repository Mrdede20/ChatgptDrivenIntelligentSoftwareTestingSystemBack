The intention of the code is to find and return a list of all prime numbers up to and including a given upper bound `max`, using the Sieve of Eratosthenes algorithm. The algorithm works by iterating over all numbers from 2 to `max`, and for each number, checking if it is divisible by any smaller prime number (which is already in the `primes` list). If the number is not divisible by any smaller prime, then it is prime itself, and is added to the `primes` list. Finally, the list of `primes` is returned.